/* Generated by Amaranth Yosys 0.40 (PyPI ver 0.40.0.0.post100, git sha1 a1bb0255d) */

(* top =  1  *)
(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:31" *)
(* generator = "Amaranth" *)
module top(clk, rst, uo_out, ui_in);
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:17" *)
  wire [2:0] cmd;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  wire en;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:22" *)
  wire [2:0] \en$19 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  wire \en$20 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  wire \en$21 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  wire \en$22 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  wire inc;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:25" *)
  wire [2:0] \inc$33 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  wire \inc$34 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  wire \inc$35 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  wire \inc$36 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:18" *)
  wire [2:0] is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  wire \is_at_turnover$38 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  wire \is_at_turnover$39 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  wire \is_at_turnover$40 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  wire [4:0] left_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  wire [4:0] \left_in$13 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  wire [4:0] \left_in$15 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  wire [4:0] left_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  wire [4:0] \left_out$10 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  wire [4:0] \left_out$12 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  wire [4:0] \left_out$8 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire \load_ring$29 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire \load_ring$30 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire \load_ring$31 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:15" *)
  wire load_start;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:23" *)
  wire \load_start$24 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:15" *)
  wire \load_start$25 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:15" *)
  wire \load_start$26 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:15" *)
  wire \load_start$27 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:21" *)
  wire ready;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  wire [4:0] right_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  wire [4:0] \right_in$5 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  wire [4:0] \right_in$7 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  wire [4:0] \right_in$9 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  wire [4:0] right_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  wire [4:0] \right_out$16 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  wire [4:0] \right_out$17 ;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:9" *)
  input [7:0] ui_in;
  wire [7:0] ui_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:10" *)
  output [5:0] uo_out;
  wire [5:0] uo_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:36" *)
  \top.fsm  fsm (
    .clk(clk),
    .cmd(ui_in[7:5]),
    .en(\en$19 ),
    .inc(\inc$33 ),
    .is_at_turnover(is_at_turnover),
    .load_start(load_start),
    .ready(ready),
    .rst(rst)
  );
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:32" *)
  \top.r0  r0 (
    .clk(clk),
    .en(\en$19 [0]),
    .inc(\inc$33 [0]),
    .is_at_turnover(\is_at_turnover$38 ),
    .left_in(\left_in$15 ),
    .left_out(\right_in$5 ),
    .load_start(load_start),
    .right_in(ui_in[4:0]),
    .right_out(\right_out$17 ),
    .rst(rst)
  );
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:33" *)
  \top.r1  r1 (
    .clk(clk),
    .en(\en$19 [1]),
    .inc(\inc$33 [1]),
    .is_at_turnover(\is_at_turnover$39 ),
    .left_in(\left_in$13 ),
    .left_out(\right_in$7 ),
    .load_start(load_start),
    .right_in(\right_in$5 ),
    .right_out(\left_in$15 ),
    .rst(rst)
  );
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:34" *)
  \top.r2  r2 (
    .clk(clk),
    .en(\en$19 [2]),
    .inc(\inc$33 [2]),
    .is_at_turnover(\is_at_turnover$40 ),
    .left_in(left_in),
    .left_out(\right_in$9 ),
    .load_start(load_start),
    .right_in(\right_in$7 ),
    .right_out(\left_in$13 ),
    .rst(rst)
  );
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/top.py:35" *)
  \top.ref  \ref  (
    .clk(clk),
    .left_out(left_in),
    .right_in(\right_in$9 ),
    .rst(rst)
  );
  assign right_in = ui_in[4:0];
  assign left_out = \right_in$5 ;
  assign \left_out$8  = \right_in$7 ;
  assign \left_out$10  = \right_in$9 ;
  assign \left_out$12  = left_in;
  assign right_out = \left_in$13 ;
  assign \right_out$16  = \left_in$15 ;
  assign en = \en$19 [0];
  assign \en$20  = \en$19 [1];
  assign \en$21  = \en$19 [2];
  assign \en$22  = 1'h0;
  assign \load_start$24  = load_start;
  assign \load_start$25  = load_start;
  assign \load_start$26  = load_start;
  assign \load_start$27  = 1'h0;
  assign load_ring = load_start;
  assign \load_ring$29  = load_start;
  assign \load_ring$30  = load_start;
  assign \load_ring$31  = 1'h0;
  assign inc = \inc$33 [0];
  assign \inc$34  = \inc$33 [1];
  assign \inc$35  = \inc$33 [2];
  assign \inc$36  = 1'h0;
  assign cmd = ui_in[7:5];
  assign is_at_turnover[2] = \is_at_turnover$40 ;
  assign is_at_turnover[1] = \is_at_turnover$39 ;
  assign is_at_turnover[0] = \is_at_turnover$38 ;
  assign uo_out[5] = ready;
  assign uo_out[4:0] = \right_out$17 ;
endmodule

(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:32" *)
(* generator = "Amaranth" *)
module \top.fsm (clk, rst, is_at_turnover, ready, load_start, inc, en, cmd);
  reg \$auto$verilog_backend.cc:2352:dump_module$1  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire [2:0] \$12 ;
  wire \$13 ;
  wire [2:0] \$14 ;
  reg [1:0] \$15 ;
  reg [3:0] \$16 ;
  reg [2:0] \$17 ;
  reg \$18 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* init = 2'h0 *)
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:33" *)
  wire [1:0] active;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:17" *)
  input [2:0] cmd;
  wire [2:0] cmd;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:35" *)
  reg double_step = 1'h0;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:22" *)
  output [2:0] en;
  wire [2:0] en;
  (* src = "/Users/virantha/.pyenv/versions/3.12.3/lib/python3.12/contextlib.py:144" *)
  reg [3:0] fsm_state = 4'h0;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:116" *)
  reg [1:0] i = 2'h0;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:34" *)
  output [2:0] inc;
  reg [2:0] inc = 3'h0;
  (* init = 3'h0 *)
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:34" *)
  wire [2:0] \inc$5 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:18" *)
  input [2:0] is_at_turnover;
  wire [2:0] is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:24" *)
  reg load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:23" *)
  output load_start;
  reg load_start;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:118" *)
  wire [3:0] o;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:21" *)
  output ready;
  reg ready;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  assign \$1  = ! (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) fsm_state;
  assign \$2  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 1'h1;
  assign \$3  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 2'h2;
  assign \$4  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 2'h3;
  assign \$5  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 3'h4;
  assign \$6  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 3'h5;
  assign \$7  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 3'h6;
  assign \$8  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 3'h7;
  assign \$9  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 4'h8;
  assign \$10  = fsm_state == (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_dsl.py:486" *) 4'h9;
  assign \$11  = i == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:79" *) 2'h3;
  assign \$12  = i + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:83" *) 1'h1;
  assign \$13  = i == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:88" *) 2'h3;
  assign \$14  = i + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:92" *) 1'h1;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:33" *)
  always @(posedge clk)
    i <= \$15 ;
  (* src = "/Users/virantha/.pyenv/versions/3.12.3/lib/python3.12/contextlib.py:144" *)
  always @(posedge clk)
    fsm_state <= \$16 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:34" *)
  always @(posedge clk)
    inc <= \$17 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:35" *)
  always @(posedge clk)
    double_step <= \$18 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/fsm.py:37" *)
  \top.fsm.dmux_en  dmux_en (
    .i(i),
    .o(o)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    ready = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          ready = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    load_start = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          load_start = 1'h0;
      4'h2:
          load_start = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    load_ring = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          load_ring = 1'h0;
      4'h2:
          /* empty */;
      4'h3:
          load_ring = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$15  = i;
    casez (fsm_state)
      4'h0:
          \$15  = 2'h0;
      4'h1:
          \$15  = 2'h0;
      4'h2:
          (* full_case = 32'd1 *)
          if (\$11 ) begin
            \$15  = 2'h0;
          end else begin
            \$15  = \$12 [1:0];
          end
      4'h3:
          (* full_case = 32'd1 *)
          if (\$13 ) begin
            \$15  = 2'h0;
          end else begin
            \$15  = \$14 [1:0];
          end
      4'h4:
          \$15  = 2'h1;
      4'h5:
          \$15  = 2'h2;
      4'h7:
          \$15  = 2'h3;
    endcase
    if (rst) begin
      \$15  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$16  = fsm_state;
    casez (fsm_state)
      4'h0:
          \$16  = 4'h1;
      4'h1:
          (* full_case = 32'd1 *)
          casez (cmd)
            3'h3:
                \$16  = 4'h0;
            3'h1:
                \$16  = 4'h2;
            3'h2:
                \$16  = 4'h3;
            3'h4:
                \$16  = 4'h4;
            default:
                \$16  = 4'h1;
          endcase
      4'h2:
          (* full_case = 32'd1 *)
          if (\$11 ) begin
            \$16  = 4'h1;
          end else begin
            \$16  = 4'h2;
          end
      4'h3:
          (* full_case = 32'd1 *)
          if (\$13 ) begin
            \$16  = 4'h1;
          end else begin
            \$16  = 4'h3;
          end
      4'h4:
          (* full_case = 32'd1 *)
          if (is_at_turnover[0]) begin
            \$16  = 4'h5;
          end else if (double_step) begin
            \$16  = 4'h5;
          end else begin
            \$16  = 4'h6;
          end
      4'h5:
          (* full_case = 32'd1 *)
          if (is_at_turnover[1]) begin
            \$16  = 4'h7;
          end else begin
            \$16  = 4'h6;
          end
      4'h7:
          \$16  = 4'h6;
      4'h6:
          \$16  = 4'h8;
      4'h8:
          \$16  = 4'h1;
      4'h9:
          \$16  = 4'h1;
    endcase
    if (rst) begin
      \$16  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$17  = inc;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          \$17  = 3'h0;
      4'h2:
          /* empty */;
      4'h3:
          /* empty */;
      4'h4:
          \$17 [0] = 1'h1;
      4'h5:
        begin
          \$17 [0] = 1'h0;
          \$17 [1] = 1'h1;
        end
      4'h7:
        begin
          \$17 [0] = 1'h0;
          \$17 [1] = 1'h0;
          \$17 [2] = 1'h1;
        end
      4'h6:
          \$17  = 3'h0;
    endcase
    if (rst) begin
      \$17  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$18  = double_step;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h2:
          /* empty */;
      4'h3:
          /* empty */;
      4'h4:
          if (is_at_turnover[0]) begin
          end else if (double_step) begin
            \$18  = 1'h0;
          end
      4'h5:
          if (is_at_turnover[1]) begin
            \$18  = 1'h1;
          end
    endcase
    if (rst) begin
      \$18  = 1'h0;
    end
  end
  assign active = i;
  assign \inc$5  = inc;
  assign en = o[3:1];
endmodule

(* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:121" *)
(* generator = "Amaranth" *)
module \top.fsm.dmux_en (o, i);
  reg \$auto$verilog_backend.cc:2352:dump_module$2  = 0;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:116" *)
  input [1:0] i;
  wire [1:0] i;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:117" *)
  wire n;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/lib/coding.py:118" *)
  output [3:0] o;
  reg [3:0] o;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    (* full_case = 32'd1 *)
    casez (i)
      2'h0:
          o = 4'h1;
      2'h1:
          o = 4'h2;
      2'h2:
          o = 4'h4;
      2'h3:
          o = 4'h8;
    endcase
  end
  assign n = 1'h0;
endmodule

(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:31" *)
(* generator = "Amaranth" *)
module \top.r0 (clk, rst, is_at_turnover, left_out, right_out, left_in, load_start, inc, en, right_in);
  reg \$auto$verilog_backend.cc:2352:dump_module$3  = 0;
  wire [5:0] \$1 ;
  wire [6:0] \$10 ;
  wire [6:0] \$11 ;
  reg [4:0] \$12 ;
  wire [5:0] \$13 ;
  wire [5:0] \$14 ;
  reg [4:0] \$15 ;
  reg [4:0] \$16 ;
  wire [5:0] \$18 ;
  wire [5:0] \$2 ;
  wire \$20 ;
  wire [5:0] \$25 ;
  wire \$27 ;
  wire [5:0] \$3 ;
  wire [6:0] \$34 ;
  wire \$36 ;
  wire [5:0] \$4 ;
  wire [6:0] \$42 ;
  wire \$44 ;
  wire [5:0] \$49 ;
  wire \$5 ;
  wire \$51 ;
  wire [5:0] \$6 ;
  wire [6:0] \$7 ;
  wire [6:0] \$8 ;
  wire [5:0] \$9 ;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  reg [4:0] cnt = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  input en;
  wire en;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  input inc;
  wire inc;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  output is_at_turnover;
  wire is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  input [4:0] left_in;
  wire [4:0] left_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  output [4:0] left_out;
  wire [4:0] left_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:27" *)
  wire [4:0] left_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  input load_start;
  wire load_start;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  input [4:0] right_in;
  wire [4:0] right_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  output [4:0] right_out;
  wire [4:0] right_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:22" *)
  wire [4:0] right_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  reg [4:0] ring_setting = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:23" *)
  reg [4:0] rtol_swizzle;
  assign \$1  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 1'h1;
  assign \$18  = \$1  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 5'h1a;
  assign is_at_turnover = cnt == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:51" *) 5'h10;
  assign \$3  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) right_in;
  assign \$25  = \$3  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) 5'h1a;
  assign \$6  = rtol_swizzle - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) cnt;
  assign \$7  = $signed(\$6 ) + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed({ 1'h0, ring_setting });
  wire [6:0] _0_ = $signed(\$7 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed(6'h1a);
  assign \$34  = (\$7 [6] == 1'h0) || _0_ == 0 ? $signed(_0_) : $signed(6'h1a) + $signed(_0_);
  assign left_out = \$5  ? (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:65" *) right_in : \$8 [4:0];
  assign \$9  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) left_in;
  assign \$10  = \$9  - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) ring_setting;
  wire [6:0] _1_ = $signed(\$10 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) $signed(6'h1a);
  assign \$42  = (\$10 [6] == 1'h0) || _1_ == 0 ? $signed(_1_) : $signed(6'h1a) + $signed(_1_);
  assign \$13  = \$12  - (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ast.py:2423" *) cnt;
  wire [5:0] _2_ = $signed(\$13 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:71" *) $signed(6'h1a);
  assign \$49  = (\$13 [5] == 1'h0) || _2_ == 0 ? $signed(_2_) : $signed(6'h1a) + $signed(_2_);
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  always @(posedge clk)
    cnt <= \$15 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  always @(posedge clk)
    ring_setting <= \$16 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    rtol_swizzle = 5'h00;
    casez (\$4 [4:0])
      5'h00:
          rtol_swizzle = 5'h04;
      5'h01:
          rtol_swizzle = 5'h0a;
      5'h02:
          rtol_swizzle = 5'h0c;
      5'h03:
          rtol_swizzle = 5'h05;
      5'h04:
          rtol_swizzle = 5'h0b;
      5'h05:
          rtol_swizzle = 5'h06;
      5'h06:
          rtol_swizzle = 5'h03;
      5'h07:
          rtol_swizzle = 5'h10;
      5'h08:
          rtol_swizzle = 5'h15;
      5'h09:
          rtol_swizzle = 5'h19;
      5'h0a:
          rtol_swizzle = 5'h0d;
      5'h0b:
          rtol_swizzle = 5'h13;
      5'h0c:
          rtol_swizzle = 5'h0e;
      5'h0d:
          rtol_swizzle = 5'h16;
      5'h0e:
          rtol_swizzle = 5'h18;
      5'h0f:
          rtol_swizzle = 5'h07;
      5'h10:
          rtol_swizzle = 5'h17;
      5'h11:
          rtol_swizzle = 5'h14;
      5'h12:
          rtol_swizzle = 5'h12;
      5'h13:
          rtol_swizzle = 5'h0f;
      5'h14:
          rtol_swizzle = 5'h00;
      5'h15:
          rtol_swizzle = 5'h08;
      5'h16:
          rtol_swizzle = 5'h01;
      5'h17:
          rtol_swizzle = 5'h11;
      5'h18:
          rtol_swizzle = 5'h02;
      5'h19:
          rtol_swizzle = 5'h09;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$12  = 5'h00;
    casez (\$11 [4:0])
      5'h00:
          \$12  = 5'h14;
      5'h01:
          \$12  = 5'h16;
      5'h02:
          \$12  = 5'h18;
      5'h03:
          \$12  = 5'h06;
      5'h04:
          \$12  = 5'h00;
      5'h05:
          \$12  = 5'h03;
      5'h06:
          \$12  = 5'h05;
      5'h07:
          \$12  = 5'h0f;
      5'h08:
          \$12  = 5'h15;
      5'h09:
          \$12  = 5'h19;
      5'h0a:
          \$12  = 5'h01;
      5'h0b:
          \$12  = 5'h04;
      5'h0c:
          \$12  = 5'h02;
      5'h0d:
          \$12  = 5'h0a;
      5'h0e:
          \$12  = 5'h0c;
      5'h0f:
          \$12  = 5'h13;
      5'h10:
          \$12  = 5'h07;
      5'h11:
          \$12  = 5'h17;
      5'h12:
          \$12  = 5'h12;
      5'h13:
          \$12  = 5'h0b;
      5'h14:
          \$12  = 5'h11;
      5'h15:
          \$12  = 5'h08;
      5'h16:
          \$12  = 5'h0d;
      5'h17:
          \$12  = 5'h10;
      5'h18:
          \$12  = 5'h0e;
      5'h19:
          \$12  = 5'h09;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$15  = cnt;
    if (en) begin
      if (load_start) begin
        \$15  = right_in;
      end else if (load_start) begin
      end else if (inc) begin
        \$15  = \$2 [4:0];
      end
    end
    if (rst) begin
      \$15  = 5'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$16  = ring_setting;
    if (en) begin
      if (load_start) begin
      end else if (load_start) begin
        \$16  = right_in;
      end
    end
    if (rst) begin
      \$16  = 5'h00;
    end
  end
  assign load_ring = load_start;
  assign right_ptr = \$4 [4:0];
  assign left_ptr = \$11 [4:0];
  assign right_out = \$14 [4:0];
  assign \$20  = 1'h1;
  assign \$2  = \$18 ;
  assign \$27  = 1'h1;
  assign \$4  = \$25 ;
  assign \$5  = load_start;
  assign \$36  = 1'h1;
  assign \$8  = \$34 ;
  assign \$44  = 1'h1;
  assign \$11  = \$42 ;
  assign \$51  = 1'h1;
  assign \$14  = \$49 ;
endmodule

(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:31" *)
(* generator = "Amaranth" *)
module \top.r1 (rst, right_in, is_at_turnover, left_out, right_out, left_in, load_start, inc, en, clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$4  = 0;
  wire [5:0] \$1 ;
  wire [6:0] \$10 ;
  wire [6:0] \$11 ;
  reg [4:0] \$12 ;
  wire [5:0] \$13 ;
  wire [5:0] \$14 ;
  reg [4:0] \$15 ;
  reg [4:0] \$16 ;
  wire [5:0] \$18 ;
  wire [5:0] \$2 ;
  wire \$20 ;
  wire [5:0] \$25 ;
  wire \$27 ;
  wire [5:0] \$3 ;
  wire [6:0] \$34 ;
  wire \$36 ;
  wire [5:0] \$4 ;
  wire [6:0] \$42 ;
  wire \$44 ;
  wire [5:0] \$49 ;
  wire \$5 ;
  wire \$51 ;
  wire [5:0] \$6 ;
  wire [6:0] \$7 ;
  wire [6:0] \$8 ;
  wire [5:0] \$9 ;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  reg [4:0] cnt = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  input en;
  wire en;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  input inc;
  wire inc;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  output is_at_turnover;
  wire is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  input [4:0] left_in;
  wire [4:0] left_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  output [4:0] left_out;
  wire [4:0] left_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:27" *)
  wire [4:0] left_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  input load_start;
  wire load_start;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  input [4:0] right_in;
  wire [4:0] right_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  output [4:0] right_out;
  wire [4:0] right_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:22" *)
  wire [4:0] right_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  reg [4:0] ring_setting = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:23" *)
  reg [4:0] rtol_swizzle;
  assign \$1  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 1'h1;
  assign \$18  = \$1  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 5'h1a;
  assign is_at_turnover = cnt == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:51" *) 3'h4;
  assign \$3  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) right_in;
  assign \$25  = \$3  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) 5'h1a;
  assign \$6  = rtol_swizzle - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) cnt;
  assign \$7  = $signed(\$6 ) + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed({ 1'h0, ring_setting });
  wire [6:0] _0_ = $signed(\$7 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed(6'h1a);
  assign \$34  = (\$7 [6] == 1'h0) || _0_ == 0 ? $signed(_0_) : $signed(6'h1a) + $signed(_0_);
  assign left_out = \$5  ? (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:65" *) right_in : \$8 [4:0];
  assign \$9  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) left_in;
  assign \$10  = \$9  - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) ring_setting;
  wire [6:0] _1_ = $signed(\$10 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) $signed(6'h1a);
  assign \$42  = (\$10 [6] == 1'h0) || _1_ == 0 ? $signed(_1_) : $signed(6'h1a) + $signed(_1_);
  assign \$13  = \$12  - (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ast.py:2423" *) cnt;
  wire [5:0] _2_ = $signed(\$13 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:71" *) $signed(6'h1a);
  assign \$49  = (\$13 [5] == 1'h0) || _2_ == 0 ? $signed(_2_) : $signed(6'h1a) + $signed(_2_);
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  always @(posedge clk)
    cnt <= \$15 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  always @(posedge clk)
    ring_setting <= \$16 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    rtol_swizzle = 5'h00;
    casez (\$4 [4:0])
      5'h00:
          rtol_swizzle = 5'h00;
      5'h01:
          rtol_swizzle = 5'h09;
      5'h02:
          rtol_swizzle = 5'h03;
      5'h03:
          rtol_swizzle = 5'h0a;
      5'h04:
          rtol_swizzle = 5'h12;
      5'h05:
          rtol_swizzle = 5'h08;
      5'h06:
          rtol_swizzle = 5'h11;
      5'h07:
          rtol_swizzle = 5'h14;
      5'h08:
          rtol_swizzle = 5'h17;
      5'h09:
          rtol_swizzle = 5'h01;
      5'h0a:
          rtol_swizzle = 5'h0b;
      5'h0b:
          rtol_swizzle = 5'h07;
      5'h0c:
          rtol_swizzle = 5'h16;
      5'h0d:
          rtol_swizzle = 5'h13;
      5'h0e:
          rtol_swizzle = 5'h0c;
      5'h0f:
          rtol_swizzle = 5'h02;
      5'h10:
          rtol_swizzle = 5'h10;
      5'h11:
          rtol_swizzle = 5'h06;
      5'h12:
          rtol_swizzle = 5'h19;
      5'h13:
          rtol_swizzle = 5'h0d;
      5'h14:
          rtol_swizzle = 5'h0f;
      5'h15:
          rtol_swizzle = 5'h18;
      5'h16:
          rtol_swizzle = 5'h05;
      5'h17:
          rtol_swizzle = 5'h15;
      5'h18:
          rtol_swizzle = 5'h0e;
      5'h19:
          rtol_swizzle = 5'h04;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$12  = 5'h00;
    casez (\$11 [4:0])
      5'h00:
          \$12  = 5'h00;
      5'h01:
          \$12  = 5'h09;
      5'h02:
          \$12  = 5'h0f;
      5'h03:
          \$12  = 5'h02;
      5'h04:
          \$12  = 5'h19;
      5'h05:
          \$12  = 5'h16;
      5'h06:
          \$12  = 5'h11;
      5'h07:
          \$12  = 5'h0b;
      5'h08:
          \$12  = 5'h05;
      5'h09:
          \$12  = 5'h01;
      5'h0a:
          \$12  = 5'h03;
      5'h0b:
          \$12  = 5'h0a;
      5'h0c:
          \$12  = 5'h0e;
      5'h0d:
          \$12  = 5'h13;
      5'h0e:
          \$12  = 5'h18;
      5'h0f:
          \$12  = 5'h14;
      5'h10:
          \$12  = 5'h10;
      5'h11:
          \$12  = 5'h06;
      5'h12:
          \$12  = 5'h04;
      5'h13:
          \$12  = 5'h0d;
      5'h14:
          \$12  = 5'h07;
      5'h15:
          \$12  = 5'h17;
      5'h16:
          \$12  = 5'h0c;
      5'h17:
          \$12  = 5'h08;
      5'h18:
          \$12  = 5'h15;
      5'h19:
          \$12  = 5'h12;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$15  = cnt;
    if (en) begin
      if (load_start) begin
        \$15  = right_in;
      end else if (load_start) begin
      end else if (inc) begin
        \$15  = \$2 [4:0];
      end
    end
    if (rst) begin
      \$15  = 5'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$16  = ring_setting;
    if (en) begin
      if (load_start) begin
      end else if (load_start) begin
        \$16  = right_in;
      end
    end
    if (rst) begin
      \$16  = 5'h00;
    end
  end
  assign load_ring = load_start;
  assign right_ptr = \$4 [4:0];
  assign left_ptr = \$11 [4:0];
  assign right_out = \$14 [4:0];
  assign \$20  = 1'h1;
  assign \$2  = \$18 ;
  assign \$27  = 1'h1;
  assign \$4  = \$25 ;
  assign \$5  = load_start;
  assign \$36  = 1'h1;
  assign \$8  = \$34 ;
  assign \$44  = 1'h1;
  assign \$11  = \$42 ;
  assign \$51  = 1'h1;
  assign \$14  = \$49 ;
endmodule

(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:31" *)
(* generator = "Amaranth" *)
module \top.r2 (rst, right_in, is_at_turnover, left_out, right_out, left_in, load_start, inc, en, clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$5  = 0;
  wire [5:0] \$1 ;
  wire [6:0] \$10 ;
  wire [6:0] \$11 ;
  reg [4:0] \$12 ;
  wire [5:0] \$13 ;
  wire [5:0] \$14 ;
  reg [4:0] \$15 ;
  reg [4:0] \$16 ;
  wire [5:0] \$18 ;
  wire [5:0] \$2 ;
  wire \$20 ;
  wire [5:0] \$25 ;
  wire \$27 ;
  wire [5:0] \$3 ;
  wire [6:0] \$34 ;
  wire \$36 ;
  wire [5:0] \$4 ;
  wire [6:0] \$42 ;
  wire \$44 ;
  wire [5:0] \$49 ;
  wire \$5 ;
  wire \$51 ;
  wire [5:0] \$6 ;
  wire [6:0] \$7 ;
  wire [6:0] \$8 ;
  wire [5:0] \$9 ;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  reg [4:0] cnt = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  input en;
  wire en;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  input inc;
  wire inc;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  output is_at_turnover;
  wire is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  input [4:0] left_in;
  wire [4:0] left_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  output [4:0] left_out;
  wire [4:0] left_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:27" *)
  wire [4:0] left_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  input load_start;
  wire load_start;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  input [4:0] right_in;
  wire [4:0] right_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  output [4:0] right_out;
  wire [4:0] right_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:22" *)
  wire [4:0] right_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  reg [4:0] ring_setting = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:23" *)
  reg [4:0] rtol_swizzle;
  assign \$1  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 1'h1;
  assign \$18  = \$1  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 5'h1a;
  assign is_at_turnover = cnt == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:51" *) 5'h15;
  assign \$3  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) right_in;
  assign \$25  = \$3  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) 5'h1a;
  assign \$6  = rtol_swizzle - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) cnt;
  assign \$7  = $signed(\$6 ) + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed({ 1'h0, ring_setting });
  wire [6:0] _0_ = $signed(\$7 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed(6'h1a);
  assign \$34  = (\$7 [6] == 1'h0) || _0_ == 0 ? $signed(_0_) : $signed(6'h1a) + $signed(_0_);
  assign left_out = \$5  ? (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:65" *) right_in : \$8 [4:0];
  assign \$9  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) left_in;
  assign \$10  = \$9  - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) ring_setting;
  wire [6:0] _1_ = $signed(\$10 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) $signed(6'h1a);
  assign \$42  = (\$10 [6] == 1'h0) || _1_ == 0 ? $signed(_1_) : $signed(6'h1a) + $signed(_1_);
  assign \$13  = \$12  - (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ast.py:2423" *) cnt;
  wire [5:0] _2_ = $signed(\$13 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:71" *) $signed(6'h1a);
  assign \$49  = (\$13 [5] == 1'h0) || _2_ == 0 ? $signed(_2_) : $signed(6'h1a) + $signed(_2_);
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  always @(posedge clk)
    cnt <= \$15 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  always @(posedge clk)
    ring_setting <= \$16 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    rtol_swizzle = 5'h00;
    casez (\$4 [4:0])
      5'h00:
          rtol_swizzle = 5'h01;
      5'h01:
          rtol_swizzle = 5'h03;
      5'h02:
          rtol_swizzle = 5'h05;
      5'h03:
          rtol_swizzle = 5'h07;
      5'h04:
          rtol_swizzle = 5'h09;
      5'h05:
          rtol_swizzle = 5'h0b;
      5'h06:
          rtol_swizzle = 5'h02;
      5'h07:
          rtol_swizzle = 5'h0f;
      5'h08:
          rtol_swizzle = 5'h11;
      5'h09:
          rtol_swizzle = 5'h13;
      5'h0a:
          rtol_swizzle = 5'h17;
      5'h0b:
          rtol_swizzle = 5'h15;
      5'h0c:
          rtol_swizzle = 5'h19;
      5'h0d:
          rtol_swizzle = 5'h0d;
      5'h0e:
          rtol_swizzle = 5'h18;
      5'h0f:
          rtol_swizzle = 5'h04;
      5'h10:
          rtol_swizzle = 5'h08;
      5'h11:
          rtol_swizzle = 5'h16;
      5'h12:
          rtol_swizzle = 5'h06;
      5'h13:
          rtol_swizzle = 5'h00;
      5'h14:
          rtol_swizzle = 5'h0a;
      5'h15:
          rtol_swizzle = 5'h0c;
      5'h16:
          rtol_swizzle = 5'h14;
      5'h17:
          rtol_swizzle = 5'h12;
      5'h18:
          rtol_swizzle = 5'h10;
      5'h19:
          rtol_swizzle = 5'h0e;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    \$12  = 5'h00;
    casez (\$11 [4:0])
      5'h00:
          \$12  = 5'h13;
      5'h01:
          \$12  = 5'h00;
      5'h02:
          \$12  = 5'h06;
      5'h03:
          \$12  = 5'h01;
      5'h04:
          \$12  = 5'h0f;
      5'h05:
          \$12  = 5'h02;
      5'h06:
          \$12  = 5'h12;
      5'h07:
          \$12  = 5'h03;
      5'h08:
          \$12  = 5'h10;
      5'h09:
          \$12  = 5'h04;
      5'h0a:
          \$12  = 5'h14;
      5'h0b:
          \$12  = 5'h05;
      5'h0c:
          \$12  = 5'h15;
      5'h0d:
          \$12  = 5'h0d;
      5'h0e:
          \$12  = 5'h19;
      5'h0f:
          \$12  = 5'h07;
      5'h10:
          \$12  = 5'h18;
      5'h11:
          \$12  = 5'h08;
      5'h12:
          \$12  = 5'h17;
      5'h13:
          \$12  = 5'h09;
      5'h14:
          \$12  = 5'h16;
      5'h15:
          \$12  = 5'h0b;
      5'h16:
          \$12  = 5'h11;
      5'h17:
          \$12  = 5'h0a;
      5'h18:
          \$12  = 5'h0e;
      5'h19:
          \$12  = 5'h0c;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    \$15  = cnt;
    if (en) begin
      if (load_start) begin
        \$15  = right_in;
      end else if (load_start) begin
      end else if (inc) begin
        \$15  = \$2 [4:0];
      end
    end
    if (rst) begin
      \$15  = 5'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    \$16  = ring_setting;
    if (en) begin
      if (load_start) begin
      end else if (load_start) begin
        \$16  = right_in;
      end
    end
    if (rst) begin
      \$16  = 5'h00;
    end
  end
  assign load_ring = load_start;
  assign right_ptr = \$4 [4:0];
  assign left_ptr = \$11 [4:0];
  assign right_out = \$14 [4:0];
  assign \$20  = 1'h1;
  assign \$2  = \$18 ;
  assign \$27  = 1'h1;
  assign \$4  = \$25 ;
  assign \$5  = load_start;
  assign \$36  = 1'h1;
  assign \$8  = \$34 ;
  assign \$44  = 1'h1;
  assign \$11  = \$42 ;
  assign \$51  = 1'h1;
  assign \$14  = \$49 ;
endmodule

(* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:31" *)
(* generator = "Amaranth" *)
module \top.ref (rst, right_in, left_out, clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$6  = 0;
  wire [5:0] \$1 ;
  wire [6:0] \$10 ;
  wire [6:0] \$11 ;
  reg [4:0] \$12 ;
  wire [5:0] \$13 ;
  wire [5:0] \$14 ;
  reg [4:0] \$15 ;
  reg [4:0] \$16 ;
  wire [5:0] \$18 ;
  wire [5:0] \$2 ;
  wire \$20 ;
  wire [5:0] \$25 ;
  wire \$27 ;
  wire [5:0] \$3 ;
  wire [6:0] \$34 ;
  wire \$36 ;
  wire [5:0] \$4 ;
  wire [6:0] \$42 ;
  wire \$44 ;
  wire [5:0] \$49 ;
  wire \$5 ;
  wire \$51 ;
  wire [5:0] \$6 ;
  wire [6:0] \$7 ;
  wire [6:0] \$8 ;
  wire [5:0] \$9 ;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input clk;
  wire clk;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  reg [4:0] cnt = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:14" *)
  wire en;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:17" *)
  wire inc;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:13" *)
  wire is_at_turnover;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:10" *)
  wire [4:0] left_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:8" *)
  output [4:0] left_out;
  wire [4:0] left_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:27" *)
  wire [4:0] left_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:16" *)
  wire load_ring;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:15" *)
  wire load_start;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:7" *)
  input [4:0] right_in;
  wire [4:0] right_in;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:11" *)
  wire [4:0] right_out;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:22" *)
  wire [4:0] right_ptr;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  reg [4:0] ring_setting = 5'h00;
  (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ir.py:283" *)
  input rst;
  wire rst;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:23" *)
  reg [4:0] rtol_swizzle;
  assign \$1  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 1'h1;
  assign \$18  = \$1  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:40" *) 5'h1a;
  assign is_at_turnover = cnt == (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:51" *) 5'h19;
  assign \$3  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) right_in;
  assign \$25  = \$3  % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:56" *) 5'h1a;
  assign \$6  = rtol_swizzle - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) cnt;
  assign \$7  = $signed(\$6 ) + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed({ 1'h0, ring_setting });
  wire [6:0] _0_ = $signed(\$7 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:67" *) $signed(6'h1a);
  assign \$34  = (\$7 [6] == 1'h0) || _0_ == 0 ? $signed(_0_) : $signed(6'h1a) + $signed(_0_);
  assign \$9  = cnt + (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) 1'h0;
  assign \$10  = \$9  - (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) ring_setting;
  wire [6:0] _1_ = $signed(\$10 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:70" *) $signed(6'h1a);
  assign \$42  = (\$10 [6] == 1'h0) || _1_ == 0 ? $signed(_1_) : $signed(6'h1a) + $signed(_1_);
  assign \$13  = \$12  - (* src = "/Users/virantha/dev/tinytapeout/ttsetup/env/lib/python3.12/site-packages/amaranth/hdl/_ast.py:2423" *) cnt;
  wire [5:0] _2_ = $signed(\$13 ) % (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:71" *) $signed(6'h1a);
  assign \$49  = (\$13 [5] == 1'h0) || _2_ == 0 ? $signed(_2_) : $signed(6'h1a) + $signed(_2_);
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:21" *)
  always @(posedge clk)
    cnt <= \$15 ;
  (* src = "/Users/virantha/dev/tinytapeout/tt10-enigma/src/rotor.py:24" *)
  always @(posedge clk)
    ring_setting <= \$16 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    rtol_swizzle = 5'h00;
    casez (\$4 [4:0])
      5'h00:
          rtol_swizzle = 5'h18;
      5'h01:
          rtol_swizzle = 5'h11;
      5'h02:
          rtol_swizzle = 5'h14;
      5'h03:
          rtol_swizzle = 5'h07;
      5'h04:
          rtol_swizzle = 5'h10;
      5'h05:
          rtol_swizzle = 5'h12;
      5'h06:
          rtol_swizzle = 5'h0b;
      5'h07:
          rtol_swizzle = 5'h03;
      5'h08:
          rtol_swizzle = 5'h0f;
      5'h09:
          rtol_swizzle = 5'h17;
      5'h0a:
          rtol_swizzle = 5'h0d;
      5'h0b:
          rtol_swizzle = 5'h06;
      5'h0c:
          rtol_swizzle = 5'h0e;
      5'h0d:
          rtol_swizzle = 5'h0a;
      5'h0e:
          rtol_swizzle = 5'h0c;
      5'h0f:
          rtol_swizzle = 5'h08;
      5'h10:
          rtol_swizzle = 5'h04;
      5'h11:
          rtol_swizzle = 5'h01;
      5'h12:
          rtol_swizzle = 5'h05;
      5'h13:
          rtol_swizzle = 5'h19;
      5'h14:
          rtol_swizzle = 5'h02;
      5'h15:
          rtol_swizzle = 5'h16;
      5'h16:
          rtol_swizzle = 5'h15;
      5'h17:
          rtol_swizzle = 5'h09;
      5'h18:
          rtol_swizzle = 5'h00;
      5'h19:
          rtol_swizzle = 5'h13;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \$12  = 5'h00;
    casez (\$11 [4:0])
      5'h00:
          \$12  = 5'h18;
      5'h01:
          \$12  = 5'h11;
      5'h02:
          \$12  = 5'h14;
      5'h03:
          \$12  = 5'h07;
      5'h04:
          \$12  = 5'h10;
      5'h05:
          \$12  = 5'h12;
      5'h06:
          \$12  = 5'h0b;
      5'h07:
          \$12  = 5'h03;
      5'h08:
          \$12  = 5'h0f;
      5'h09:
          \$12  = 5'h17;
      5'h0a:
          \$12  = 5'h0d;
      5'h0b:
          \$12  = 5'h06;
      5'h0c:
          \$12  = 5'h0e;
      5'h0d:
          \$12  = 5'h0a;
      5'h0e:
          \$12  = 5'h0c;
      5'h0f:
          \$12  = 5'h08;
      5'h10:
          \$12  = 5'h04;
      5'h11:
          \$12  = 5'h01;
      5'h12:
          \$12  = 5'h05;
      5'h13:
          \$12  = 5'h19;
      5'h14:
          \$12  = 5'h02;
      5'h15:
          \$12  = 5'h16;
      5'h16:
          \$12  = 5'h15;
      5'h17:
          \$12  = 5'h09;
      5'h18:
          \$12  = 5'h00;
      5'h19:
          \$12  = 5'h13;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \$15  = cnt;
    if (rst) begin
      \$15  = 5'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \$16  = ring_setting;
    if (rst) begin
      \$16  = 5'h00;
    end
  end
  assign en = 1'h0;
  assign load_start = 1'h0;
  assign load_ring = 1'h0;
  assign inc = 1'h0;
  assign right_ptr = \$4 [4:0];
  assign left_ptr = \$11 [4:0];
  assign left_in = 5'h00;
  assign right_out = \$14 [4:0];
  assign \$20  = 1'h1;
  assign \$2  = \$18 ;
  assign \$27  = 1'h1;
  assign \$4  = \$25 ;
  assign \$5  = 1'h0;
  assign \$36  = 1'h1;
  assign \$8  = \$34 ;
  assign left_out = \$8 [4:0];
  assign \$44  = 1'h1;
  assign \$11  = \$42 ;
  assign \$51  = 1'h1;
  assign \$14  = \$49 ;
endmodule
